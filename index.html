<script>
let cart = {};

function addItem(name, price, minQty) {
    if (!cart[name]) {
        cart[name] = { price: price, qty: 0 };
    }
    cart[name].qty += minQty;
    updateCart();
    openCart();
}

function removeItem(name) {
    if (cart[name]) {
        delete cart[name];
    }
    updateCart();
}

function updateCart() {
    const cartItemsDiv = document.getElementById("cartItems");
    const totalSpan = document.getElementById("total");

    cartItemsDiv.innerHTML = "";
    let total = 0;
    let itemCount = 0;

    for (let item in cart) {
        const itemTotal = cart[item].price * cart[item].qty;
        total += itemTotal;
        itemCount++;

        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `
            <span>${item} (x${cart[item].qty})</span>
            <span>â‚¹${itemTotal}</span>
        `;
        cartItemsDiv.appendChild(div);
    }

    if (itemCount === 0) {
        cartItemsDiv.innerHTML = "<p class='small'>Cart is empty</p>";
    }

    totalSpan.innerText = total;
    document.querySelector(".cart-btn").innerText = "ðŸ›’ Cart (" + itemCount + ")";
}

function openCart() {
    document.getElementById("cartBox").classList.add("open");
}

function toggleCart() {
    document.getElementById("cartBox").classList.toggle("open");
}

function sendWhatsApp() {
    if (Object.keys(cart).length === 0) {
        alert("Cart is empty");
        return;
    }

    let message = "Mankhush Home Delights Order\n\n";
    let total = 0;

    for (let item in cart) {
        const itemTotal = cart[item].price * cart[item].qty;
        total += itemTotal;
        message += `${item} - Qty ${cart[item].qty} - â‚¹${itemTotal}\n`;
    }

    message += `\nTotal: â‚¹${total}`;
    message += `\nDelivery charges extra as per actual Courier Charges.`;

    window.open(
        "https://wa.me/918209520964?text=" + encodeURIComponent(message),
        "_blank"
    );
}
</script>
